# 前端不显示内容 - 调试步骤

## 🔍 立即执行的步骤

### 1. 硬刷新浏览器
```
Windows: Ctrl + Shift + R 或 Ctrl + F5
Mac: Cmd + Shift + R
```

### 2. 清除浏览器缓存
```
1. 按 F12 打开开发者工具
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"
```

### 3. 检查控制台日志

打开浏览器控制台（F12 → Console），应该看到：

```javascript
发送请求: {genre: "科幻", style: "modern", keywords: ["AI"], target_length: "medium"}
收到响应: {success: true, outline: {...}}
响应类型: object
响应键: ["success", "outline", "background_materials"]
大纲数据: {story_summary: "...", ...}
```

**如果没有看到这些日志**：
- 前端代码没有更新，需要重启前端服务

**如果看到 `收到响应: undefined`**：
- API调用失败，检查Network标签

### 4. 检查Network标签

1. 打开开发者工具 → Network标签
2. 点击"生成故事大纲"按钮
3. 找到 `/api/novel/outline` 请求
4. 点击查看：
   - Status: 应该是 200
   - Response: 查看返回的JSON数据

**示例正确响应**：
```json
{
  "success": true,
  "outline": {
    "story_summary": "...",
    "characters": [...],
    "world_setting": "...",
    ...
  },
  "background_materials": []
}
```

### 5. 重启前端服务

```bash
# 停止前端服务 (Ctrl+C)
# 然后重新启动
cd frontend
npm run dev
```

### 6. 检查React状态

在控制台输入：
```javascript
// 查看outlineData状态
console.log('outlineData:', outlineData)
```

---

## 🐛 常见问题

### 问题1: 控制台没有任何日志
**原因**: 前端代码没有更新
**解决**: 
1. 停止前端服务 (Ctrl+C)
2. 重新启动: `npm run dev`
3. 硬刷新浏览器 (Ctrl+Shift+R)

### 问题2: 看到 "收到响应: undefined"
**原因**: API调用失败
**解决**:
1. 检查后端是否运行
2. 检查Network标签的错误信息
3. 确认API地址正确

### 问题3: 响应成功但不显示
**原因**: React状态没有更新或渲染条件不满足
**解决**:
1. 检查 `outlineData` 是否有值
2. 检查 `{outlineData && (...)}` 条件
3. 查看是否有JavaScript错误

### 问题4: TypeScript错误
**原因**: 类型定义问题
**解决**: 已添加 `: any` 类型断言

---

## ✅ 验证清单

- [ ] 后端服务运行正常 (http://localhost:8000/health)
- [ ] 前端服务运行正常 (http://localhost:3000)
- [ ] 浏览器已硬刷新 (Ctrl+Shift+R)
- [ ] 开发者工具已打开 (F12)
- [ ] Console标签显示调试日志
- [ ] Network标签显示200响应
- [ ] 响应数据结构正确
- [ ] outlineData状态已更新
- [ ] 页面显示大纲内容

---

## 🚀 快速测试命令

在浏览器控制台执行：

```javascript
// 测试API调用
fetch('http://localhost:8000/api/novel/outline', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({
    genre: '科幻',
    style: 'modern',
    keywords: ['AI'],
    target_length: 'medium'
  })
})
.then(r => r.json())
.then(data => console.log('API响应:', data))
.catch(err => console.error('API错误:', err))
```

预期输出：
```javascript
API响应: {success: true, outline: {...}, background_materials: [...]}
```

---

## 📞 如果仍然不显示

请提供以下信息：

1. **浏览器控制台的完整日志**
2. **Network标签中的响应数据**
3. **是否有JavaScript错误**
4. **前端服务的终端输出**

复制这些信息以便进一步诊断。
